<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hypnorelax - Auto-hypnose guidée pour votre bien-être</title>
    
    <!-- Styles CSS -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="mobile-optimization.css">
    
    <!-- Font Awesome pour les icônes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Manifest pour PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0A2463">
    <link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
    <!-- En-tête avec navigation -->
    <header class="site-header">
        <div class="container">
            <div class="logo">
                <span class="logo-text">Hypnorelax</span>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="#fonctionnalites">Fonctionnalités</a></li>
                    <li><a href="#avantages">Avantages</a></li>
                    <li><a href="#temoignages">Témoignages</a></li>
                    <li><a href="#tarifs">Offres</a></li>
                </ul>
            </nav>
            <button class="menu-toggle" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- Bannière d'introduction -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Découvrez le pouvoir de l'auto-hypnose guidée</h1>
                <p class="hero-subtitle">Une application conçue par un hypnothérapeute professionnel pour vous aider à vous relaxer, gérer votre stress et améliorer votre bien-être.</p>
                <div class="cta-buttons">
                    <a href="index.html" class="btn btn-primary">Commencer gratuitement</a>
                    <a href="#premium" class="btn btn-secondary">Découvrir Premium</a>
                </div>
            </div>
            <div class="hero-image">
                <img src="hero-illustration.png" alt="Hypnorelax en action sur différents appareils" class="hero-img">
                <div class="app-badges">
                    <div class="badge">
                        <i class="fas fa-mobile-alt"></i>
                        <span>Compatible mobile</span>
                    </div>
                    <div class="badge">
                        <i class="fas fa-tablet-alt"></i>
                        <span>Optimisé tablette</span>
                    </div>
                    <div class="badge">
                        <i class="fas fa-laptop"></i>
                        <span>Fonctionne sur PC</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="wave-divider">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" class="wave-fill"></path>
            </svg>
        </div>
    </section>

    <!-- Section Fonctionnalités -->
    <section id="fonctionnalites" class="features">
        <div class="container">
            <h2 class="section-title">Fonctionnalités principales</h2>
            <p class="section-subtitle">Découvrez comment Hypnorelax peut transformer votre quotidien</p>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3>Auto-hypnose guidée</h3>
                    <p>Sessions progressives d'induction hypnotique avec une voix apaisante et des visuels captivants.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <h3>Cohérence cardiaque</h3>
                    <p>Technique de respiration qui synchronise votre rythme cardiaque pour un état de calme immédiat.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-headphones-alt"></i>
                    </div>
                    <h3>Sons binauraux</h3>
                    <p>Stimulation des ondes cérébrales par des fréquences sonores spécifiques pour une relaxation profonde.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3>Application PWA</h3>
                    <p>Installez Hypnorelax sur votre écran d'accueil et utilisez-la même sans connexion Internet.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Section Avantages -->
    <section id="avantages" class="benefits">
        <div class="container">
            <h2 class="section-title">Les bienfaits de l'auto-hypnose</h2>
            <p class="section-subtitle">Des résultats prouvés pour votre bien-être mental et physique</p>
            
            <div class="benefits-container">
                <div class="benefits-content">
                    <ul class="benefits-list">
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h3>Réduction du stress</h3>
                                <p>Diminuez significativement votre niveau de stress et d'anxiété.</p>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h3>Amélioration du sommeil</h3>
                                <p>Retrouvez un sommeil profond et réparateur naturellement.</p>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h3>Gestion de la douleur</h3>
                                <p>Techniques efficaces pour atténuer les douleurs chroniques.</p>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h3>Confiance en soi</h3>
                                <p>Renforcez votre estime personnelle et votre assurance.</p>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="benefits-image">
                    <img src="benefits-image.jpg" alt="Personne détendue pratiquant l'auto-hypnose">
                    <div class="benefits-quote">
                        <blockquote>"L'hypnose est une porte d'entrée vers les ressources inexplorées de notre esprit."</blockquote>
                        <cite>— Joffrey ROS, Créateur d'Hypnorelax</cite>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section Comment ça marche -->
    <section class="how-it-works">
        <div class="container">
            <h2 class="section-title">Comment ça marche ?</h2>
            <p class="section-subtitle">Un processus simple en 3 étapes</p>
            
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Installez l'application</h3>
                        <p>Accédez à Hypnorelax depuis votre navigateur et installez-la sur votre appareil en quelques clics.</p>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Choisissez votre session</h3>
                        <p>Sélectionnez une session adaptée à vos besoins et installez-vous confortablement.</p>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Laissez-vous guider</h3>
                        <p>Suivez simplement les instructions vocales et visuelles pour entrer dans un état d'auto-hypnose bénéfique.</p>
                    </div>
                </div>
            </div>
            
            <div class="demo-video">
                <h3>Voyez Hypnorelax en action</h3>
                <div class="video-container">
                    <img src="demo-preview.jpg" alt="Démonstration Hypnorelax" class="video-placeholder">
                    <button class="play-button">
                        <i class="fas fa-play"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Section Témoignages -->
    <section id="temoignages" class="testimonials">
        <div class="container">
            <h2 class="section-title">Ce que nos utilisateurs disent</h2>
            <p class="section-subtitle">Des expériences réelles avec Hypnorelax</p>
            
            <div class="testimonials-slider">
                <div class="testimonial">
                    <div class="testimonial-content">
                        <p>"J'avais essayé plusieurs applications de méditation sans succès. Hypnorelax a été une révélation ! La cohérence cardiaque combinée à l'auto-hypnose m'a permis de réduire mon stress en seulement quelques sessions."</p>
                    </div>
                    <div class="testimonial-author">
                        <img src="testimonial-1.jpg" alt="Sophie M.">
                        <div>
                            <h4>Sophie M.</h4>
                            <p>Utilisatrice depuis 3 mois</p>
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial">
                    <div class="testimonial-content">
                        <p>"Je souffrais d'insomnies chroniques depuis des années. Grâce à la session d'auto-hypnose du soir, je m'endors maintenant en 15 minutes au lieu de plusieurs heures. Un véritable changement dans ma qualité de vie !"</p>
                    </div>
                    <div class="testimonial-author">
                        <img src="testimonial-2.jpg" alt="Thomas L.">
                        <div>
                            <h4>Thomas L.</h4>
                            <p>Utilisateur depuis 6 mois</p>
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial">
                    <div class="testimonial-content">
                        <p>"Les animations visuelles sont hypnotisantes et la voix est parfaitement adaptée. J'utilise l'application tous les jours pour un moment de détente. Le fait qu'elle soit installable sur mon téléphone est un vrai plus !"</p>
                    </div>
                    <div class="testimonial-author">
                        <img src="testimonial-3.jpg" alt="Emma D.">
                        <div>
                            <h4>Emma D.</h4>
                            <p>Utilisatrice depuis 2 mois</p>
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="testimonial-nav">
                <button class="prev-btn"><i class="fas fa-chevron-left"></i></button>
                <div class="dots">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
                <button class="next-btn"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
    </section>

    <!-- Section Offres et Prix -->
    <section id="tarifs" class="pricing">
        <div class="container">
            <h2 class="section-title">Nos offres</h2>
            <p class="section-subtitle">Choisissez la formule adaptée à vos besoins</p>
            
            <div class="pricing-cards">
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Gratuit</h3>
                        <div class="price">0€</div>
                        <p>Pour découvrir l'auto-hypnose</p>
                    </div>
                    <div class="pricing-features">
                        <ul>
                            <li><i class="fas fa-check"></i> Session d'auto-hypnose de base</li>
                            <li><i class="fas fa-check"></i> Cohérence cardiaque</li>
                            <li><i class="fas fa-check"></i> Sons binauraux basiques</li>
                            <li><i class="fas fa-check"></i> Installation sur appareil</li>
                            <li class="disabled"><i class="fas fa-times"></i> Sessions spécialisées</li>
                            <li class="disabled"><i class="fas fa-times"></i> Personnalisation avancée</li>
                            <li class="disabled"><i class="fas fa-times"></i> Suivi de progression</li>
                        </ul>
                    </div>
                    <div class="pricing-footer">
                        <a href="index.html" class="btn btn-outline">Essayer gratuitement</a>
                    </div>
                </div>
                
                <div class="pricing-card premium" id="premium">
                    <div class="ribbon">Populaire</div>
                    <div class="pricing-header">
                        <h3>Premium</h3>
                        <div class="price">9,99€<span>/mois</span></div>
                        <p>Pour une expérience complète</p>
                    </div>
                    <div class="pricing-features">
                        <ul>
                            <li><i class="fas fa-check"></i> Tout ce qui est inclus dans l'offre gratuite</li>
                            <li><i class="fas fa-check"></i> <strong>5 sessions spécialisées</strong> (sommeil, stress, confiance...)</li>
                            <li><i class="fas fa-check"></i> <strong>Personnalisation</strong> des sons et voix</li>
                            <li><i class="fas fa-check"></i> <strong>Suivi de progression</strong> personnalisé</li>
                            <li><i class="fas fa-check"></i> <strong>Rappels</strong> et programmation de sessions</li>
                            <li><i class="fas fa-check"></i> <strong>Accès prioritaire</strong> aux nouvelles fonctionnalités</li>
                            <li><i class="fas fa-check"></i> <strong>Support</strong> dédié</li>
                        </ul>
                    </div>
                    <div class="pricing-footer">
                        <a href="#notification" class="btn btn-primary js-notification-trigger">Bientôt disponible</a>
                        <p class="pricing-note">Essai gratuit de 7 jours</p>
                    </div>
                </div>
                
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Pro</h3>
                        <div class="price">99€<span>/an</span></div>
                        <p>Pour les professionnels de la santé</p>
                    </div>
                    <div class="pricing-features">
                        <ul>
                            <li><i class="fas fa-check"></i> Tout ce qui est inclus dans l'offre Premium</li>
                            <li><i class="fas fa-check"></i> <strong>Toutes les sessions spécialisées</strong> (10+)</li>
                            <li><i class="fas fa-check"></i> <strong>Création</strong> de scripts personnalisés</li>
                            <li><i class="fas fa-check"></i> <strong>Licence</strong> professionnelle pour utilisation avec clients</li>
                            <li><i class="fas fa-check"></i> <strong>Ressources</strong> éducatives supplémentaires</li>
                            <li><i class="fas fa-check"></i> <strong>Support prioritaire</strong></li>
                        </ul>
                    </div>
                    <div class="pricing-footer">
                        <a href="#notification" class="btn btn-outline js-notification-trigger">Bientôt disponible</a>
                        <p class="pricing-note">Économisez 20% par rapport au tarif mensuel</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section FAQ -->
    <section class="faq">
        <div class="container">
            <h2 class="section-title">Questions fréquentes</h2>
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">
                        <h3>Qu'est-ce que l'auto-hypnose ?</h3>
                        <span class="faq-icon"><i class="fas fa-chevron-down"></i></span>
                    </div>
                    <div class="faq-answer">
                        <p>L'auto-hypnose est une technique qui permet d'atteindre un état de conscience modifié par soi-même, caractérisé par une concentration accrue et une grande suggestibilité. Contrairement aux idées reçues, vous restez conscient et en contrôle pendant toute la séance.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h3>L'application fonctionne-t-elle sans Internet ?</h3>
                        <span class="faq-icon"><i class="fas fa-chevron-down"></i></span>
                    </div>
                    <div class="faq-answer">
                        <p>Oui, Hypnorelax est une Progressive Web App (PWA) qui peut être installée sur votre appareil et utilisée hors ligne après le premier chargement. Toutes les fonctionnalités principales sont disponibles sans connexion Internet.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h3>Est-ce que tout le monde peut pratiquer l'auto-hypnose ?</h3>
                        <span class="faq-icon"><i class="fas fa-chevron-down"></i></span>
                    </div>
                    <div class="faq-answer">
                        <p>La grande majorité des personnes peuvent bénéficier de l'auto-hypnose. Cependant, les personnes souffrant d'épilepsie, de troubles psychiatriques graves ou de certaines conditions médicales devraient consulter un professionnel de la santé avant d'utiliser l'application.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h3>Combien de temps faut-il pour ressentir des effets ?</h3>
                        <span class="faq-icon"><i class="fas fa-chevron-down"></i></span>
                    </div>
                    <div class="faq-answer">
                        <p>Beaucoup d'utilisateurs ressentent des effets positifs dès la première séance, notamment une détente immédiate. Pour des changements plus profonds, une pratique régulière de 2-3 fois par semaine pendant au moins 3 semaines est recommandée.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h3>Puis-je annuler mon abonnement à tout moment ?</h3>
                        <span class="faq-icon"><i class="fas fa-chevron-down"></i></span>
                    </div>
                    <div class="faq-answer">
                        <p>Absolument ! Vous pouvez annuler votre abonnement Premium à tout moment depuis votre espace personnel. L'accès aux fonctionnalités Premium restera disponible jusqu'à la fin de la période déjà payée.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section Notification -->
    <div id="notification" class="notification-modal">
        <div class="notification-content">
            <span class="close-notification">&times;</span>
            <h3>Soyez informé(e) du lancement Premium</h3>
            <p>Recevez une notification dès que nos fonctionnalités Premium seront disponibles et bénéficiez d'une offre de lancement exclusive.</p>
            <form class="notification-form">
                <div class="form-group">
                    <input type="email" placeholder="Votre adresse email" required>
                </div>
                <button type="submit" class="btn btn-primary">Je veux être informé(e)</button>
            </form>
        </div>
    </div>

    <!-- Call-to-action finale -->
    <section class="cta">
        <div class="container">
            <h2>Prêt à commencer votre voyage vers le bien-être ?</h2>
            <p>Essayez Hypnorelax gratuitement et découvrez le pouvoir de l'auto-hypnose guidée.</p>
            <a href="index.html" class="btn btn-primary btn-large">Commencer maintenant</a>
        </div>
    </section>

    <!-- Pied de page -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <span class="logo-text">Hypnorelax</span>
                    <p>Auto-hypnose guidée pour votre bien-être</p>
                    
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Application</h4>
                        <ul>
                            <li><a href="#fonctionnalites">Fonctionnalités</a></li>
                            <li><a href="#tarifs">Prix</a></li>
                            <li><a href="#temoignages">Témoignages</a></li>
                            <li><a href="#">Conditions d'utilisation</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Ressources</h4>
                        <ul>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">Guide de l'auto-hypnose</a></li>
                            <li><a href="#">FAQ</a></li>
                            <li><a href="#">Support</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Contact</h4>
                        <ul>
                            <li><a href="https://hypnosejoffrey.fr" target="_blank">hypnosejoffrey.fr</a></li>
                            <li><a href="mailto:joffrey66@gmail.com">joffrey66@gmail.com</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Hypnorelax - Joffrey ROS. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <!-- Script JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Navigation mobile
            const menuToggle = document.querySelector('.menu-toggle');
            const body = document.querySelector('body');
            let mobileNav, overlay;
            
            if (menuToggle) {
                menuToggle.addEventListener('click', function() {
                    toggleMobileNav();
                });
                
                // Créer la navigation mobile dynamiquement
                createMobileNav();
            }
            
            function createMobileNav() {
                // Créer l'overlay
                overlay = document.createElement('div');
                overlay.className = 'overlay';
                body.appendChild(overlay);
                
                // Créer la navigation mobile
                mobileNav = document.createElement('div');
                mobileNav.className = 'mobile-nav';
                
                // Copier les liens de la navigation principale
                const mainNavLinks = document.querySelector('.main-nav ul').cloneNode(true);
                
                // Ajouter le bouton de fermeture
                const closeBtn = document.createElement('span');
                closeBtn.className = 'close-mobile-nav';
                closeBtn.innerHTML = '&times;';
                
                mobileNav.appendChild(closeBtn);
                mobileNav.appendChild(mainNavLinks);
                body.appendChild(mobileNav);
                
                // Ajouter les écouteurs d'événements
                closeBtn.addEventListener('click', toggleMobileNav);
                overlay.addEventListener('click', toggleMobileNav);
                
                // Ajouter des écouteurs aux liens pour fermer la navigation après clic
                const navLinks = mobileNav.querySelectorAll('a');
                navLinks.forEach(link => {
                    link.addEventListener('click', toggleMobileNav);
                });
            }
            
            function toggleMobileNav() {
                mobileNav.classList.toggle('active');
                overlay.classList.toggle('active');
                body.classList.toggle('no-scroll');
            }
            
            // Header Sticky
            const header = document.querySelector('.site-header');
            let scrollPosition = window.pageYOffset;
            
            window.addEventListener('scroll', function() {
                scrollPosition = window.pageYOffset;
                
                if (scrollPosition > 50) {
                    header.classList.add('sticky');
                } else {
                    header.classList.remove('sticky');
                }
            });
            
            // Témoignages Carrousel
            const testimonialsSlider = document.querySelector('.testimonials-slider');
            const testimonials = document.querySelectorAll('.testimonial');
            const dots = document.querySelectorAll('.dot');
            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');
            
            if (testimonialsSlider && testimonials.length > 0) {
                let currentIndex = 0;
                
                // Cacher tous les témoignages sauf le premier
                testimonials.forEach((testimonial, index) => {
                    if (index !== 0) {
                        testimonial.style.display = 'none';
                    }
                });
                
                // Boutons précédent et suivant
                if (prevBtn) {
                    prevBtn.addEventListener('click', () => {
                        navigateTestimonial('prev');
                    });
                }
                
                if (nextBtn) {
                    nextBtn.addEventListener('click', () => {
                        navigateTestimonial('next');
                    });
                }
                
                // Points de navigation
                if (dots.length > 0) {
                    dots.forEach((dot, index) => {
                        dot.addEventListener('click', () => {
                            navigateTestimonial(index);
                        });
                    });
                }
                
                function navigateTestimonial(direction) {
                    // Cacher le témoignage actuel
                    testimonials[currentIndex].style.display = 'none';
                    
                    // Retirer la classe active du point actuel
                    if (dots.length > 0) {
                        dots[currentIndex].classList.remove('active');
                    }
                    
                    // Calculer le nouvel index
                    if (direction === 'next') {
                        currentIndex = (currentIndex + 1) % testimonials.length;
                    } else if (direction === 'prev') {
                        currentIndex = (currentIndex - 1 + testimonials.length) % testimonials.length;
                    } else if (typeof direction === 'number') {
                        currentIndex = direction;
                    }
                    
                    // Afficher le nouveau témoignage
                    testimonials[currentIndex].style.display = 'block';
                    
                    // Ajouter la classe active au nouveau point
                    if (dots.length > 0) {
                        dots[currentIndex].classList.add('active');
                    }
                }
                
                // Défilement automatique
                setInterval(() => {
                    navigateTestimonial('next');
                }, 8000);
            }
            
            // FAQ Accordéon
            const faqItems = document.querySelectorAll('.faq-item');
            
            if (faqItems.length > 0) {
                faqItems.forEach(item => {
                    const question = item.querySelector('.faq-question');
                    
                    question.addEventListener('click', () => {
                        const isActive = item.classList.contains('active');
                        
                        // Fermer tous les items
                        faqItems.forEach(faqItem => {
                            faqItem.classList.remove('active');
                        });
                        
                        // Ouvrir l'item cliqué s'il n'était pas déjà ouvert
                        if (!isActive) {
                            item.classList.add('active');
                        }
                    });
                });
            }
            
            // Modal de notification
            const notificationTriggers = document.querySelectorAll('.js-notification-trigger');
            const notificationModal = document.getElementById('notification');
            
            if (notificationTriggers.length > 0 && notificationModal) {
                notificationTriggers.forEach(trigger => {
                    trigger.addEventListener('click', (e) => {
                        e.preventDefault();
                        notificationModal.classList.add('active');
                        body.classList.add('no-scroll');
                    });
                });
                
                // Fermer la modal
                const closeModal = notificationModal.querySelector('.close-notification');
                if (closeModal) {
                    closeModal.addEventListener('click', () => {
                        notificationModal.classList.remove('active');
                        body.classList.remove('no-scroll');
                    });
                }
                
                // Fermer la modal en cliquant en dehors
                notificationModal.addEventListener('click', (e) => {
                    if (e.target === notificationModal) {
                        notificationModal.classList.remove('active');
                        body.classList.remove('no-scroll');
                    }
                });
                
                // Traitement du formulaire
                const notificationForm = notificationModal.querySelector('.notification-form');
                if (notificationForm) {
                    notificationForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        
                        const emailInput = notificationForm.querySelector('input[type="email"]');
                        if (emailInput && isValidEmail(emailInput.value)) {
                            // Ici, vous pourriez envoyer l'e-mail à votre serveur
                            // Pour cet exemple, nous simulons simplement une réussite
                            
                            // Changer le contenu de la modal
                            const modalContent = notificationModal.querySelector('.notification-content');
                            modalContent.innerHTML = `
                                <span class="close-notification">&times;</span>
                                <h3>Merci pour votre inscription !</h3>
                                <p>Nous vous contacterons dès que les fonctionnalités Premium seront disponibles.</p>
                                <div style="text-align: center; margin-top: 20px;">
                                    <button class="btn btn-primary close-modal-btn">Fermer</button>
                                </div>
                            `;
                            
                            // Réajouter l'écouteur pour fermer
                            const newCloseBtn = modalContent.querySelector('.close-notification');
                            const closeModalBtn = modalContent.querySelector('.close-modal-btn');
                            
                            newCloseBtn.addEventListener('click', () => {
                                notificationModal.classList.remove('active');
                                body.classList.remove('no-scroll');
                            });
                            
                            closeModalBtn.addEventListener('click', () => {
                                notificationModal.classList.remove('active');
                                body.classList.remove('no-scroll');
                            });
                        } else {
                            // Afficher une erreur
                            const emailInput = notificationForm.querySelector('input[type="email"]');
                            emailInput.style.borderColor = 'red';
                            
                            // Réinitialiser après un délai
                            setTimeout(() => {
                                emailInput.style.borderColor = '';
                            }, 3000);
                        }
                    });
                }
            }
            
            // Fonction de validation d'e-mail
            function isValidEmail(email) {
                const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return re.test(String(email).toLowerCase());
            }
            
            // Video player
            const videoContainer = document.querySelector('.video-container');
            const playButton = document.querySelector('.play-button');
            
            if (videoContainer && playButton) {
                playButton.addEventListener('click', () => {
                    // Remplacer l'image par une iframe video
                    const videoPlaceholder = videoContainer.querySelector('.video-placeholder');
                    const videoURL = "https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1"; // URL d'exemple
                    
                    const iframe = document.createElement('iframe');
                    iframe.setAttribute('src', videoURL);
                    iframe.setAttribute('width', '100%');
                    iframe.setAttribute('height', videoPlaceholder.offsetHeight + 'px');
                    iframe.setAttribute('frameborder', '0');
                    iframe.setAttribute('allowfullscreen', '');
                    iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
                    
                    videoContainer.replaceChild(iframe, videoPlaceholder);
                    playButton.style.display = 'none';
                });
            }
            
            // Smooth scroll pour les ancres
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    if (this.getAttribute('href') === '#') return;
                    
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        const headerHeight = header.offsetHeight;
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerHeight;
                        
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });
    </script>

    <!-- Scripts pour l'application Hypnorelax -->
    <script src="script.js"></script>
    <script src="mobile-optimization.js"></script>

    <!-- Script de correctif pour l'application -->
    <script>
    /**
     * Hypnorelax - Correctif pour faire fonctionner l'application
     * Ce script corrige les problèmes d'initialisation et de navigation
     */

    // Attendre que le DOM soit chargé
    document.addEventListener('DOMContentLoaded', function() {
        console.log("Initialisation de Hypnorelax...");
        
        // Déterminer si nous sommes sur la page marketing ou l'application
        const isMarketingPage = document.querySelector('.hero') !== null;
        
        if (isMarketingPage) {
            console.log("Page marketing détectée, configuration des boutons...");
            setupMarketingButtons();
        } else {
            console.log("Page d'application détectée, lancement de l'application...");
            initializeApp();
        }
    });

    /**
     * Configure les boutons de la page marketing pour lancer l'application
     */
    function setupMarketingButtons() {
        // Trouver tous les boutons qui renvoient vers index.html
        const appButtons = document.querySelectorAll('a[href="index.html"]');
        
        appButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                console.log("Bouton 'Commencer' cliqué, lancement de l'application...");
                
                // Cacher la page marketing
                hideMarketingPage();
                
                // Créer et afficher l'application
                createAppStructure();
                
                // Initialiser l'application
                setTimeout(() => {
                    initializeApp();
                    showPage(1); // Afficher la première page de l'application
                }, 100);
            });
        });
    }

    /**
     * Cache la page marketing
     */
    function hideMarketingPage() {
        // Cacher tous les éléments de la page marketing
        const marketingElements = [
            '.site-header', '.hero', '.features', '.benefits', 
            '.how-it-works', '.testimonials', '.pricing', 
            '.faq', '.cta', '.site-footer', '.mobile-nav', '.overlay'
        ];
        
        marketingElements.forEach(selector => {
            const elements = document.querySelectorAll(selector);
            elements.forEach(el => {
                el.style.display = 'none';
            });
        });
        
        // Nettoyer le body
        document.body.style.padding = '0';
        document.body.style.margin = '0';
        document.body.style.background = '#f5f5f5';
    }

    /**
     * Crée la structure HTML de l'application
     */
    function createAppStructure() {
        const appHTML = `
        <div class="container">
            <!-- Page d'introduction -->
            <div class="page" id="page1">
                <header>
                    <div class="app-branding">
                        <span class="app-name">Hypnorelax</span>
                    </div>
                    <h1>Auto-Hypnose Guidée</h1>
                </header>
                
                <div class="intro-content">
                    <div class="intro-icon">
                        <div class="spiral-small"></div>
                    </div>
                    <h2>Bienvenue dans votre voyage vers la relaxation profonde</h2>
                    <p>Cette application vous guidera à travers une séance d'auto-hypnose pour vous aider à atteindre un état de détente et de bien-être.</p>
                    
                    <div class="steps-list">
                        <li>Vous commencerez par une courte séance de cohérence cardiaque</li>
                        <li>Suivie d'une induction hypnotique progressive</li>
                        <li>Puis une exploration de votre monde intérieur</li>
                        <li>Et enfin un retour en douceur à l'état de veille</li>
                    </div>
                    
                    <div class="btn-container">
                        <button id="startBtn" class="btn">Commencer</button>
                    </div>
                </div>
            </div>
            
            <!-- Page Cohérence Cardiaque -->
            <div class="page" id="page2">
                <header>
                    <div class="app-branding">
                        <span class="app-name">Hypnorelax</span>
                    </div>
                    <h1>Cohérence Cardiaque</h1>
                </header>
                
                <div id="coherenceIntroduction">
                    <p>Commençons par une courte séance de cohérence cardiaque pour calmer votre système nerveux et préparer votre esprit.</p>
                    
                    <div class="coherence-instructions">
                        <h3>Instructions :</h3>
                        <p>Suivez simplement le cercle qui s'agrandit et se rétrécit. Inspirez quand il s'agrandit, expirez quand il se rétrécit.</p>
                        <p>La séance dure 2 minutes (6 respirations par minute).</p>
                    </div>
                    
                    <div class="audio-controls">
                        <div class="audio-toggle">
                            <label for="audioToggle">Guide vocal</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="audioToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="voice-selection">
                            <label for="voiceSelect">Voix :</label>
                            <select id="voiceSelect"></select>
                            <span id="speakingIndicator" class="speaking-indicator"></span>
                        </div>
                        
                        <div class="volume-control">
                            <label for="volumeSlider">Volume :</label>
                            <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="0.8">
                        </div>
                    </div>
                    
                    <div class="btn-container">
                        <button id="startCoherenceBtn" class="btn">Démarrer</button>
                        <button id="homeBtn" class="btn btn-blue">Retour</button>
                    </div>
                </div>
                
                <div id="coherenceContainer" class="coherence-container" style="display: none;">
                    <div id="breathCircle" class="breath-circle"></div>
                    <div class="breath-path"></div>
                    <div id="breathInLabel" class="breath-label breath-in-label">Inspirez</div>
                    <div id="breathOutLabel" class="breath-label breath-out-label">Expirez</div>
                </div>
                
                <div id="timerDisplay" class="timer-display" style="display: none;">2:00</div>
                <div id="coherenceInstruction" class="instruction" style="display: none;"></div>
            </div>
            
            <!-- Autres pages de l'application -->
            <div class="page" id="page3">
                <header>
                    <h1>Induction</h1>
                </header>
                <div id="inductionInstruction" class="instruction"></div>
                <div id="inductionCounter" class="counter"></div>
                <div class="spiral-container">
                    <div class="spiral"></div>
                    <div class="spiral-center"></div>
                    <div class="focus-dot"></div>
                </div>
            </div>
            
            <div class="page" id="page4">
                <header>
                    <h1>Approfondissement</h1>
                </header>
                <div id="deepeningInstruction" class="instruction"></div>
                <div id="stairsCounter" class="counter"></div>
                <!-- Escalier d'hypnose -->
                <div class="escalator-container">
                    <div class="escalator">
                        <div class="steps-container">
                            <div class="escalator-step"></div>
                            <div class="escalator-step"></div>
                            <div class="escalator-step"></div>
                            <div class="escalator-step"></div>
                            <div class="escalator-step"></div>
                            <div class="escalator-step"></div>
                            <div class="escalator-step"></div>
                            <div class="escalator-step"></div>
                            <div class="escalator-step"></div>
                            <div class="escalator-step"></div>
                        </div>
                        <div class="escalator-rider"></div>
                    </div>
                </div>
            </div>
            
            <div class="page" id="page5">
                <header>
                    <h1>Exploration</h1>
                </header>
                <div id="explorationInstruction" class="instruction"></div>
                <div class="exploration-scene">
                    <div class="exploration-background"></div>
                    <div class="exploration-ring"></div>
                    <div class="exploration-ring"></div>
                    <div class="exploration-ring"></div>
                </div>
                <div class="progress-container">
                    <div id="explorationProgress"></div>
                </div>
            </div>
            
            <div class="page" id="page6">
                <header>
                    <h1>Reveil</h1>
                </header>
                <div id="awakeningCounter" class="counter"></div>
                <div id="energyScene" class="energy-scene">
                    <div class="energy-glow"></div>
                </div>
            </div>
            
            <div class="page" id="page7">
                <header>
                    <h1>Séance terminée</h1>
                </header>
                <div class="intro-content">
                    <div class="intro-icon">
                        <div class="spiral-small"></div>
                    </div>
                    <h2>Félicitations !</h2>
                    <p>Vous avez terminé votre séance d'auto-hypnose. Prenez un moment pour apprécier cet état de relaxation profonde.</p>
                    
                    <div class="btn-container">
                        <button id="restartBtn" class="btn">Nouvelle séance</button>
                        <button class="btn btn-blue" onclick="window.location.reload()">Quitter</button>
                    </div>
                </div>
            </div>
            
            <!-- Barre de progression -->
            <div class="progress-steps">
                <div class="progress-line"></div>
                <div id="progressFill" class="progress-fill" style="width: 0%;"></div>
                <div class="step active" data-step="1">
                    <div class="step-label">Introduction</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-label">Cohérence</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-label">Induction</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-label">Profondeur</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-label">Exploration</div>
                </div>
                <div class="step" data-step="6">
                    <div class="step-label">Réveil</div>
                </div>
                <div class="step" data-step="7">
                    <div class="step-label">Fin</div>
                </div>
            </div>
            
            <!-- Sons binauraux -->
            <div class="audio-controls" style="margin-top: 20px;">
                <div class="audio-toggle">
                    <label for="binauralToggle">Sons binauraux</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="binauralToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="volume-control">
                    <label for="binauralVolumeSlider">Volume :</label>
                    <input type="range" id="binauralVolumeSlider" min="0" max="1" step="0.1" value="0.2">
                </div>
            </div>
            <p class="binaural-info">Les sons binauraux utilisent des fréquences spécifiques pour favoriser les ondes cérébrales associées à la détente profonde.</p>
            
            <footer>
                <p>&copy; 2025 Hypnorelax - Joffrey ROS</p>
            </footer>
        </div>
        `;
        
        // Créer un nouvel élément qui contiendra l'application
        const appContainer = document.createElement('div');
        appContainer.id = 'hypnorelax-app';
        appContainer.innerHTML = appHTML;
        
        // Ajouter l'application au document
        document.body.appendChild(appContainer);
    }

    /**
     * Fonction pour afficher une page spécifique de l'application
     */
    function showPage(pageNumber) {
        // Masquer toutes les pages
        const pages = document.querySelectorAll('.page');
        pages.forEach(page => {
            page.classList.remove('active');
        });
        
        // Afficher la page demandée
        const targetPage = document.getElementById(`page${pageNumber}`);
        if (targetPage) {
            targetPage.classList.add('active');
            currentPage = pageNumber;
            
            // Mettre à jour les étapes
            updateSteps(pageNumber);
            
            // Synthèse vocale selon la page
            if (speech && speech.synth && audioToggle && audioToggle.checked) {
                switch(pageNumber) {
                    case 1:
                        speech.speak("Bienvenue dans Hypnorelax. Cette application vous guidera à travers une séance d'auto-hypnose pour vous aider à atteindre un état de détente et de bien-être.");
                        break;
                    case 2:
                        speech.speak("Commençons par une courte séance de cohérence cardiaque pour calmer votre système nerveux et préparer votre esprit.");
                        break;
                    // Autres cas pour les autres pages...
                }
            }
        } else {
            console.error(`Page ${pageNumber} non trouvée`);
        }
    }

    /**
     * Met à jour l'affichage des étapes
     */
    function updateSteps(currentStep) {
        // Mettre à jour les classes des étapes
        const steps = document.querySelectorAll('.step');
        steps.forEach(step => {
            const stepNumber = parseInt(step.getAttribute('data-step'));
            if (stepNumber <= currentStep) {
                step.classList.add('active');
            } else {
                step.classList.remove('active');
            }
        });
        
        // Mettre à jour la barre de progression
        const progressFill = document.getElementById('progressFill');
        if (progressFill) {
            const progress = ((currentStep - 1) / (steps.length - 1)) * 100;
            progressFill.style.width = `${progress}%`;
        }
    }

    /**
     * Fonction pour démarrer la cohérence cardiaque
     */
    function startCoherenceCardiaque() {
        try {
            console.log("Démarrage de la cohérence cardiaque");
            
            // Masquer l'introduction et afficher l'animation
            const coherenceIntro = document.getElementById('coherenceIntroduction');
            const coherenceContainer = document.getElementById('coherenceContainer');
            const timerDisplay = document.getElementById('timerDisplay');
            const coherenceInstruction = document.getElementById('coherenceInstruction');
            
            if (coherenceIntro) coherenceIntro.style.display = 'none';
            if (coherenceContainer) coherenceContainer.style.display = 'block';
            if (timerDisplay) timerDisplay.style.display = 'block';
            if (coherenceInstruction) coherenceInstruction.style.display = 'block';
            
            // Initialiser le timer
            secondsRemaining = 120; // 2 minutes
            updateTimerDisplay();
            
            // Démarrer l'animation de respiration
            startBreathingAnimation();
            
            // Parler si l'audio est activé
            if (speech && speech.synth && audioToggle && audioToggle.checked) {
                speech.speak("Suivez le rythme. Inspirez pendant 5 secondes quand le cercle s'agrandit, puis expirez pendant 5 secondes quand il se rétrécit.");
            }
            
            // Activer les sons binauraux si ils sont activés
            const binauralToggle = document.getElementById('binauralToggle');
            if (binauralToggle && binauralToggle.checked) {
                startBinauralBeats();
            }
            
            // Démarrer le timer
            coherenceTimer = safeSetTimeout(() => {
                finishCoherenceCardiaque();
            }, secondsRemaining * 1000);
            
            // Mettre à jour le timer chaque seconde
            coherenceInterval = safeSetInterval(() => {
                secondsRemaining--;
                updateTimerDisplay();
                
                // Messages vocaux à des moments spécifiques
                if (audioToggle && audioToggle.checked) {
                    const remainingMinutes = Math.floor(secondsRemaining / 60);
                    const remainingSeconds = secondsRemaining % 60;
                    
                    if (remainingMinutes === 1 && remainingSeconds === 30) {
                        speech.speak("Vous faites très bien. Continuez à respirer calmement.");
                    } else if (remainingMinutes === 0 && remainingSeconds === 45) {
                        speech.speak("Encore quelques respirations. Sentez comme votre corps et votre esprit se détendent.");
                    } else if (remainingMinutes === 0 && remainingSeconds === 15) {
                        speech.speak("Dernières respirations. Préparez-vous à continuer votre voyage.");
                    }
                }
            }, 1000);
            
        } catch (error) {
            console.error("Erreur lors du démarrage de la cohérence cardiaque:", error);
        }
    }

    /**
     * Fonction pour mettre à jour l'affichage du timer
     */
    function updateTimerDisplay() {
        const minutes = Math.floor(secondsRemaining / 60);
        const seconds = secondsRemaining % 60;
        const timerDisplay = document.getElementById('timerDisplay');
        
        if (timerDisplay) {
            timerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }
    }

    /**
     * Fonction pour démarrer l'animation de respiration
     */
    function startBreathingAnimation() {
        const breathCircle = document.getElementById('breathCircle');
        const breathInLabel = document.getElementById('breathInLabel');
        const breathOutLabel = document.getElementById('breathOutLabel');
        const coherenceInstruction = document.getElementById('coherenceInstruction');
        
        if (!breathCircle) return;
        
        const breathDuration = 5000; // 5 secondes pour inspirer, 5 secondes pour expirer
        
        // Fonction pour animer un cycle de respiration
        function animateBreathCycle() {
            // Phase d'inspiration
            if (coherenceInstruction) coherenceInstruction.textContent = "Inspirez profondément...";
            if (breathInLabel) breathInLabel.style.opacity = "1";
            if (breathOutLabel) breathOutLabel.style.opacity = "0";
            
            breathCircle.style.transition = `all ${breathDuration}ms cubic-bezier(0.5, 0, 0.5, 1)`;
            breathCircle.style.transform = 'translate(-50%, -50%) scale(3)';
            
            // Phase d'expiration après breathDuration ms
            setTimeout(() => {
                if (coherenceInstruction) coherenceInstruction.textContent = "Expirez lentement...";
                if (breathInLabel) breathInLabel.style.opacity = "0";
                if (breathOutLabel) breathOutLabel.style.opacity = "1";
                
                breathCircle.style.transition = `all ${breathDuration}ms cubic-bezier(0.5, 0, 0.5, 1)`;
                breathCircle.style.transform = 'translate(-50%, -50%) scale(1)';
            }, breathDuration);
        }
        
        // Lancer le premier cycle immédiatement
        animateBreathCycle();
        
        // Répéter le cycle toutes les 10 secondes (5s inspire + 5s expire)
        const breathingInterval = setInterval(animateBreathCycle, breathDuration * 2);
        
        // Stocker l'intervalle pour pouvoir l'arrêter plus tard
        allIntervals.add(breathingInterval);
    }

    /**
     * Fonction pour terminer la cohérence cardiaque et passer à l'étape suivante
     */
    function finishCoherenceCardiaque() {
        // Nettoyer les timeouts et intervals
        if (coherenceTimer) {
            clearTimeout(coherenceTimer);
            coherenceTimer = null;
        }
        
        if (coherenceInterval) {
            clearInterval(coherenceInterval);
            coherenceInterval = null;
        }
        
        // Message de fin
        if (audioToggle && audioToggle.checked) {
            speech.speak("Excellent. Vous avez terminé la cohérence cardiaque. Nous allons maintenant passer à l'induction hypnotique.");
        }
        
        // Passer à l'étape suivante après un court délai
        setTimeout(() => {
            showPage(3); // Page d'induction
        }, 3000);
    }

    // Définir les variables globales nécessaires
    let allTimeouts = new Set();
    let allIntervals = new Set();
    let currentPage = 1;
    let coherenceTimer;
    let coherenceInterval;
    let secondsRemaining = 120;

    /**
     * Fonction de nettoyage sécurisée pour setTimeout
     */
    function safeSetTimeout(callback, delay) {
        if (typeof callback !== 'function') {
            console.error("safeSetTimeout: callback n'est pas une fonction", callback);
            return null;
        }
        
        try {
            const timeoutId = setTimeout(() => {
                try {
                    allTimeouts.delete(timeoutId);
                    callback();
                } catch (error) {
                    console.error("Erreur dans le callback de safeSetTimeout:", error);
                }
            }, delay || 0);
            
            allTimeouts.add(timeoutId);
            return timeoutId;
        } catch (error) {
            console.error("Erreur lors de la création de safeSetTimeout:", error);
            return null;
        }
    }

    /**
     * Fonction de nettoyage sécurisée pour setInterval
     */
    function safeSetInterval(callback, delay) {
        if (typeof callback !== 'function') {
            console.error("safeSetInterval: callback n'est pas une fonction", callback);
            return null;
        }
        
        try {
            const intervalId = setInterval(() => {
                try {
                    callback();
                } catch (error) {
                    console.error("Erreur dans le callback de safeSetInterval:", error);
                }
            }, delay || 1000);
            
            allIntervals.add(intervalId);
            return intervalId;
        } catch (error) {
            console.error("Erreur lors de la création de safeSetInterval:", error);
            return null;
        }
    }

    /**
     * Fonction pour ajuster les styles pour mobile
     */
    function adjustMobileStyles() {
        const isMobile = window.innerWidth < 768 || 
                        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isMobile) {
            document.body.classList.add('mobile-device');
            console.log("Styles mobiles appliqués");
        } else {
            document.body.classList.remove('mobile-device');
        }
    }

    /**
     * Fonction pour initialiser les références DOM
     */
    function initDOMReferences() {
        // Cette fonction sera appelée par initializeApp
        // On s'assure que les éléments sont présents avant de les référencer
        
        console.log("Initialisation des références DOM");
        
        // Récupérer les références des éléments une fois qu'ils sont créés
        pages = document.querySelectorAll('.page');
        steps = document.querySelectorAll('.step');
        progressFill = document.getElementById('progressFill');
        
        // Contrôles audio
        audioToggle = document.getElementById('audioToggle');
        voiceSelect = document.getElementById('voiceSelect');
        volumeSlider = document.getElementById('volumeSlider');
        speakingIndicator = document.getElementById('speakingIndicator');
        
        // Éléments de la cohérence cardiaque
        coherenceIntro = document.getElementById('coherenceIntroduction');
        coherenceContainer = document.getElementById('coherenceContainer');
        breathCircle = document.getElementById('breathCircle');
        breathInLabel = document.getElementById('breathInLabel');
        breathOutLabel = document.getElementById('breathOutLabel');
        timerDisplay = document.getElementById('timerDisplay');
        coherenceInstruction = document.getElementById('coherenceInstruction');
        
        // Boutons essentiels
        startBtn = document.getElementById('startBtn');
        startCoherenceBtn = document.getElementById('startCoherenceBtn');
        restartBtn = document.getElementById('restartBtn');
        homeBtn = document.getElementById('homeBtn');
        
        // Autres éléments
        inductionInstruction = document.getElementById('inductionInstruction');
        inductionCounter = document.getElementById('inductionCounter');
        deepeningInstruction = document.getElementById('deepeningInstruction');
        stairsCounter = document.getElementById('stairsCounter');
        explorationInstruction = document.getElementById('explorationInstruction');
        awakeningCounter = document.getElementById('awakeningCounter');
        energyScene = document.getElementById('energyScene');
        
        // Vérifier les éléments critiques
        if (!pages || !pages.length) {
            console.error("Éléments de page non trouvés");
        }
        
        if (!startBtn) {
            console.error("Bouton de démarrage non trouvé");
        }
        
        console.log("Références DOM initialisées avec succès");
    }

    /**
     * Fonction pour configurer les écouteurs d'événements
     */
    function setupEventListeners() {
        try {
            console.log("Configuration des écouteurs d'événements");
            
            // Boutons essentiels - s'assurer qu'ils existent d'abord
            if (startBtn) {
                startBtn.addEventListener('click', function() {
                    console.log("Bouton Start cliqué");
                    showPage(2);
                });
            } else {
                console.error("startBtn non trouvé");
            }
            
            if (startCoherenceBtn) {
                startCoherenceBtn.addEventListener('click', function() {
                    console.log("Bouton startCoherence cliqué");
                    startCoherenceCardiaque();
                });
            } else {
                console.error("startCoherenceBtn non trouvé");
            }
            
            if (restartBtn) {
                restartBtn.addEventListener('click', function() {
                    console.log("Bouton Restart cliqué");
                    showPage(2);
                });
            } else {
                console.error("restartBtn non trouvé");
            }
            
            if (homeBtn) {
                homeBtn.addEventListener('click', function() {
                    console.log("Bouton Home cliqué");
                    showPage(1);
                });
            } else {
                console.error("homeBtn non trouvé");
            }
            
            // Sons binauraux
            const binauralToggle = document.getElementById('binauralToggle');
            if (binauralToggle) {
                binauralToggle.addEventListener('change', function() {
                    if (this.checked) {
                        startBinauralBeats();
                    } else {
                        stopBinauralBeats();
                    }
                });
            }
            
            // Contrôle du volume des sons binauraux
            const binauralVolumeSlider = document.getElementById('binauralVolumeSlider');
            if (binauralVolumeSlider) {
                binauralVolumeSlider.addEventListener('input', function() {
                    updateBinauralVolume(parseFloat(this.value));
                });
            }
            
            // Ajout d'un écouteur pour le redimensionnement
            window.addEventListener('resize', adjustMobileStyles);
            
            console.log("Écouteurs d'événements configurés avec succès");
        } catch (error) {
            console.error("Erreur lors de la configuration des écouteurs d'événements:", error);
        }
    }

    // Stub pour la fonction startBinauralBeats
    function startBinauralBeats() {
        console.log("Démarrage des sons binauraux");
        // Implémenter si nécessaire
    }

    // Stub pour la fonction stopBinauralBeats
    function stopBinauralBeats() {
        console.log("Arrêt des sons binauraux");
        // Implémenter si nécessaire
    }

    // Stub pour la fonction updateBinauralVolume
    function updateBinauralVolume(volume) {
        console.log("Mise à jour du volume des sons binauraux:", volume);
        // Implémenter si nécessaire
    }

    // Objet de synthèse vocale minimal
    const speech = {
        synth: null,
        voices: [],
        selectedVoice: null,
        volume: 0.8,
        
        init: function() {
            try {
                // Initialiser la synthèse vocale
                if ('speechSynthesis' in window) {
                    this.synth = window.speechSynthesis;
                    console.log("Synthèse vocale initialisée");
                    
                    // Charger les voix disponibles
                    this.voices = this.synth.getVoices();
                    
                    // Si aucune voix n'est disponible immédiatement, attendre l'événement voiceschanged
                    if (this.voices.length === 0) {
                        console.log("Attente du chargement des voix...");
                        window.speechSynthesis.onvoiceschanged = () => {
                            this.voices = this.synth.getVoices();
                            this.selectBestFrenchVoice();
                            this.populateVoiceList();
                        };
                    } else {
                        this.selectBestFrenchVoice();
                        this.populateVoiceList();
                    }
                    
                    return true;
                } else {
                    console.warn("La synthèse vocale n'est pas supportée par ce navigateur");
                    return false;
                }
            } catch (error) {
                console.error("Erreur lors de l'initialisation de la synthèse vocale:", error);
                return false;
            }
        },
        
        selectBestFrenchVoice: function() {
            // Sélectionner la meilleure voix française disponible
            const frenchVoices = this.voices.filter(voice => 
                voice.lang && voice.lang.toLowerCase().includes('fr')
            );
            
            if (frenchVoices.length > 0) {
                this.selectedVoice = frenchVoices[0];
                console.log("Voix française sélectionnée:", this.selectedVoice.name);
            } else if (this.voices.length > 0) {
                this.selectedVoice = this.voices[0];
                console.log("Aucune voix française trouvée, utilisation de:", this.selectedVoice.name);
            } else {
                console.warn("Aucune voix disponible");
            }
        },
        
        populateVoiceList: function() {
            // Remplir la liste des voix si l'élément existe
            if (voiceSelect) {
                voiceSelect.innerHTML = '';
                
                this.voices.forEach((voice, index) => {
                    const option = document.createElement('option');
                    option.textContent = `${voice.name} (${voice.lang})`;
                    option.setAttribute('data-voice-index', index);
                    voiceSelect.appendChild(option);
                    
                    // Sélectionner la voix actuelle
                    if (voice === this.selectedVoice) {
                        voiceSelect.selectedIndex = index;
                    }
                });
                
                // Ajouter l'écouteur d'événements
                voiceSelect.addEventListener('change', () => {
                    const selectedIndex = voiceSelect.selectedIndex;
                    const voiceIndex = voiceSelect.options[selectedIndex].getAttribute('data-voice-index');
                    this.selectedVoice = this.voices[voiceIndex];
                    console.log("Nouvelle voix sélectionnée:", this.selectedVoice.name);
                });
            }
        },
        
        speak: function(text) {
            try {
                // Vérifier si la synthèse vocale est disponible et activée
                if (!this.synth || !audioToggle || !audioToggle.checked) {
                    return;
                }
                
                console.log("Synthèse vocale:", text);
                
                // Créer un nouvel énoncé
                const utterance = new SpeechSynthesisUtterance(text);
                
                // Configurer l'énoncé
                if (this.selectedVoice) {
                    utterance.voice = this.selectedVoice;
                }
                
                utterance.volume = this.volume;
                utterance.rate = 0.9;
                utterance.pitch = 1.0;
                utterance.lang = 'fr-FR';
                
                // Ajouter des événements
                utterance.onstart = () => {
                    if (speakingIndicator) {
                        speakingIndicator.classList.add('active');
                    }
                };
                
                utterance.onend = () => {
                    if (speakingIndicator) {
                        speakingIndicator.classList.remove('active');
                    }
                };
                
                // Prononcer le texte
                this.synth.speak(utterance);
            } catch (error) {
                console.error("Erreur lors de la synthèse vocale:", error);
            }
        },
        
        stop: function() {
            if (this.synth) {
                this.synth.cancel();
            }
        }
    };
    </script>

    <!-- Service worker pour la PWA -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('Service Worker enregistré avec succès:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Échec de l\'enregistrement du Service Worker:', error);
                    });
            });
        }
    </script>
</body>
</html>
